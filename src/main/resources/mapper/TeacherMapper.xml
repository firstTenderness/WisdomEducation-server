<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dream.mapper.TeacherMapper">
    <insert id="add" >
        INSERT INTO `person` (
        `name`,
        `gender`,
        `age`,
        `phone`,
        `idCard`,
        `account`,
        `password`,
        `salt`,
        `roleType`,
        `position`
        ) VALUES (
        #{name},        <!-- 对应Student实体类的name属性 -->
        #{gender},      <!-- 对应gender属性（1男/2女） -->
        #{age},         <!-- 对应age属性 -->
        #{phone},       <!-- 对应phone属性 -->
        #{idCard},      <!-- 对应idCard属性（实体类属性名若为idCard，这里写#{idCard}） -->
        #{account},     <!-- 对应account属性 -->
        #{password},    <!-- 对应加密后的password属性 -->
        #{salt},        <!-- 对应salt属性 -->
        #{role_type},        <!-- role_type固定为1（学生） -->
        #{position}     <!-- 对应position属性（比如“普通学生”） -->
        )
    </insert>
    <update id="update" parameterType="com.dream.pojo.Teacher">
        update person set name = #{name}, gender = #{gender}, age = #{age}
                        , phone = #{phone}, idcard = #{idCard}, roletype = #{roleType},
                          position = #{position} , update_time = #{updateTime} where id = #{id}
        and roletype=2
    </update>
    <delete id="delete" parameterType="com.dream.pojo.Teacher">
delete from person where id in
                    <foreach item="id" collection="ids" separator="," open="(" close=")">
                        #{id}
                    </foreach>
                   and role_type = 2
</delete>
    <select id="list" parameterType="com.dream.pojo.EmpQueryParam">
        SELECT name, gender, age, phone, idCard, roletype, position FROM person WHERE roletype=2
        <if test="name != null">
            AND name LIKE CONCAT('%', #{name}, '%')
        </if>
        <if test="gender != null">
            AND gender = #{gender}
        </if>
order by create_time  desc
    </select>
    <select id="get" resultType="com.dream.pojo.Teacher">
        SELECT name, gender, age, phone, idCard, roletype, position FROM person WHERE id = #{id}
        and roletype=2
    </select>
    <select id="getByAccount" resultType="com.dream.pojo.Teacher">
            SELECT * FROM person WHERE account = #{account} LIMIT 1</select>
</mapper>